

## UI
### å®šä¹‰ç»„ä»¶
1. å¯¼å‡ºç»„ä»¶ - export default å‰ç¼€
2. å®šä¹‰å‡½æ•° - ç»„ä»¶åå­—å¿…é¡»ä»¥å¤§å†™å­—æ¯å¼€å¤´
3. æ·»åŠ æ ‡ç­¾
``` js
//Congratulations.js
export default function Congratulations() {
  return (
    <h1>å¹²å¾—æ¼‚äº®ï¼</h1>
  );
}
```

### å¯¼å…¥&å¯¼å‡ºç»„ä»¶
| è¯­æ³•  |                 å¯¼å‡º                  |               å¯¼å…¥                 |
| ---- | ------------------------------------- | --------------------------------- |
| é»˜è®¤  | `export default function Button() {}`  |  `import Button from './Button.js'`  |
| å…·å  | `export function Button() {}`         |  `import {Button} from './Button.js'` |


### JSX
JSX æ˜¯ JS è¯­æ³•æ‰©å±•
#### JSXè§„åˆ™
1. åªèƒ½è¿”å›ä¸€ä¸ªæ ¹å…ƒç´ ï¼Œå¯ä»¥ç”¨ <> å’Œ </> å…ƒç´ æ¥ä»£æ›¿ï¼Œè¿™ä¸ªç©ºæ ‡ç­¾è¢«ç§°ä½œ [Fragment](https://zh-hans.react.dev/reference/react/Fragment)ï¼Œåœ¨åº•å±‚å…¶å®è¢«è½¬åŒ–ä¸ºJSå¯¹è±¡ï¼Œæ‰€ä»¥ JSX æ ‡ç­¾éœ€è¦è¢«ä¸€ä¸ªçˆ¶å…ƒç´ åŒ…è£¹ã€‚
2. æ ‡ç­¾å¿…é¡»é—­åˆ
3. ä½¿ç”¨é©¼å³°å¼å‘½åæ³•ç»™å¤§éƒ¨åˆ†å±æ€§å‘½å ï¼React DOMå…ƒç´ ä¸­æ‰€æœ‰å¯¹åº”çš„[å±æ€§](https://zh-hans.react.dev/reference/react-dom/components/common)

#### JSXä¸­é€šè¿‡å¤§æ‹¬å·ä½¿ç”¨JS
1. ä½¿ç”¨å¼•å·ä¼ é€’å­—ç¬¦ä¸²
2. {}å†…å¼•ç”¨ JS å˜é‡
3. {}å†…è°ƒç”¨ JS å‡½æ•°
4. {}å†…ä½¿ç”¨ JS å¯¹è±¡

### ç»„ä»¶é€šä¿¡ï¼ˆğŸ‰‘ï¸ä¼ é€’ä»»ä½•JSå€¼åŒ…æ‹¬å¯¹è±¡ã€æ•°ç»„ã€å‡½æ•°
1. å°†propsä¼ é€’ç»™å­ç»„ä»¶ 
2. åœ¨å­ç»„ä»¶ä¸­è¯»å–props
```js
export default function Profile() {
  return (
    <Avatar
      person={{ name: 'Lin Lanying', imageId: '1bX5QH6' }}
      size={100}
    />
  );
}
// props å¯ä»¥æŒ‡å®šç»™ä¸€ä¸ªé»˜è®¤å€¼
function Avatar({ person, size = 100 }) {
  // åœ¨è¿™é‡Œ person å’Œ size æ˜¯å¯è®¿é—®çš„
}
```

### æ¸²æŸ“UIï¼ˆæ¡ä»¶æ¸²æŸ“/æ¸²æŸ“åˆ—è¡¨ï¼‰
1. æ ¹æ®ä¸åŒæ¡ä»¶ä½¿ç”¨ ä¸‰ç›®è¿ç®—ç¬¦ï¼ˆ?:ï¼‰/ä¸è¿ç®—ç¬¦(&&) è¿”å›ä¸åŒJSXï¼Œæ¸²æŸ“
2. é€šè¿‡JSçš„ map()/filter() æ–¹æ³• æ¸²æŸ“
```js
const listItems = chemists.map(person =>
  <li>...</li> // éšå¼åœ°è¿”å› å¯çœç•¥returnè¯­å¥
);
const listItems = chemists.map(person => { 
  // èŠ±æ‹¬å·å¿…é¡»ä½¿ç”¨return æŒ‡å®šè¿”å›å€¼
  return <li>...</li>;
});
```


## äº¤äº’
1. æ·»åŠ äº‹ä»¶å¤„ç†å‡½æ•° ä¼ é€’/è¯»å–props
```js
function Button({ onSmash, children }) {
  return (
    // âœ… æ­£ç¡®ï¼šå°†äº‹ä»¶å¤„ç†å‡½æ•°ä¼ é€’ä¸‹å»
    <button onClick={onSmash}> {children} </button>
    // âœ… æ­£ç¡®ï¼šä¼ é€’ä¸€ä¸ªå†…è”å‡½æ•°
    // <button onClick={(e) => handleClick(e)}>Click me</button>
    // <button onClick={function handleClick(){ alert('ä½ ç‚¹å‡»äº†æˆ‘ï¼');}}>ç‚¹æˆ‘</button>
    // <button onClick={() => { alert('ä½ ç‚¹å‡»äº†æˆ‘ï¼');}}>ç‚¹æˆ‘</button>
  );
}

export default function App() {
  return (
    <div>
      <Button onSmash={() => alert('æ­£åœ¨æ’­æ”¾ï¼')}>
        æ’­æ”¾ç”µå½±
      </Button>
      <Button onSmash={() => alert('æ­£åœ¨ä¸Šä¼ ï¼')}>
        ä¸Šä¼ å›¾ç‰‡
      </Button>
    </div>
  );
}
```

2. äº‹ä»¶ä¼ æ’­ 
|             è¡Œä¸º          |                 æ–¹æ³•            |         æè¿°          |
|:------------------------:|:-------------------------------:|----------------------------|
|é˜»æ­¢ä¼ æ’­                    |`e.stopPropagation()`       | é˜»æ­¢è§¦å‘ç»‘å®šåœ¨å¤–å±‚æ ‡ç­¾ä¸Šçš„äº‹ä»¶å¤„ç†å‡½æ•° |
|é˜»æ­¢é»˜è®¤è¡Œä¸º                |`e.preventDefault()`            | é˜»æ­¢å°‘æ•°äº‹ä»¶çš„é»˜è®¤æµè§ˆå™¨è¡Œä¸ºã€‚|


## å¸¸ç”¨ Hooks
### useState çŠ¶æ€å˜é‡
```js
// 1 ä¸ºç»„ä»¶æ·»åŠ çŠ¶æ€
// 2 æ ¹æ®å…ˆå‰çš„ state æ›´æ–° state
const [thing, setThing] = useState(initialState)
// 3 æ›´æ–°çŠ¶æ€ä¸­çš„å¯¹è±¡å’Œæ•°ç»„(é¿å…ä½¿ç”¨ä¼šæ”¹å˜åŸå§‹æ•°ç»„) 
// å¯ä»¥ä½¿ç”¨ ... å¯¹è±¡å±•å¼€ è¯­æ³•
  setForm({
    ...form,
    firstName: 'Taylor'
  });
  // å¯ä»¥åœ¨å¯¹è±¡çš„å®šä¹‰ä¸­ä½¿ç”¨ [ å’Œ ] æ‹¬å·æ¥å®ç°å±æ€§çš„åŠ¨æ€å‘½å
  setPerson({
    ...person,
    [e.target.name]: e.target.value
  });
  // æ·»åŠ å…ƒç´  concat [...arr]
  setCategory([
    newCategory,
    ...category
  ])
  // å‘æ•°ç»„ä¸­æ’å…¥å…ƒç´ 
  function handleClick() {
    const insertAt = 1; // å¯èƒ½æ˜¯ä»»ä½•ç´¢å¼•
    const nextArtists = [
      // æ’å…¥ç‚¹ä¹‹å‰çš„å…ƒç´ ï¼š
      ...artists.slice(0, insertAt),
      // æ–°çš„å…ƒç´ ï¼š
      { id: nextId++, name: name },
      // æ’å…¥ç‚¹ä¹‹åçš„å…ƒç´ ï¼š
      ...artists.slice(insertAt)
    ];
    setArtists(nextArtists);
    setName('');
  }
  // åˆ é™¤å…ƒç´  filter slice
  setCategory(category.filter(lists => lists.id !== items.id)) 
  // æ›¿æ¢å…ƒç´  map
  function handleIncrementClick(index) {
    const nextCounters = counters.map((c, i) => {
      if (i === index) {
        // é€’å¢è¢«ç‚¹å‡»çš„è®¡æ•°å™¨æ•°å€¼
        return c + 1;
      } else {
        // å…¶ä½™éƒ¨åˆ†ä¸å‘ç”Ÿå˜åŒ–
        return c;
      }
    });
    setCounters(nextCounters);
  }
  // æ’åº å…ˆå°†æ•°ç»„å¤åˆ¶ä¸€ä»½ sort reverse
  function handleClick() {
    const nextList = [...list];
    nextList.reverse();
    setList(nextList);
  }
/*
4 é¿å…é‡å¤åˆ›å»ºåˆå§‹çŠ¶æ€
5 ä½¿ç”¨ key é‡ç½®çŠ¶æ€
6 å­˜å‚¨å‰ä¸€æ¬¡æ¸²æŸ“çš„ä¿¡æ¯ï¼Œåœ¨ç›¸åŒä½ç½®æ¸²æŸ“çš„æ˜¯ç›¸åŒç»„ä»¶ï¼Œ React å°±ä¼šä¿ç•™çŠ¶æ€
7 çŠ¶æ€æå‡: state ç§»åŠ¨åˆ°å…±åŒçš„çˆ¶ç»„ä»¶ä¸­ï¼Œç”¨propsä¼ é€’ä¿¡æ¯ã€‚è¦è€ƒè™‘ç»„ä»¶æ˜¯â€œå—æ§â€ï¼ˆç”± prop é©±åŠ¨ï¼‰æˆ–æ˜¯â€œä¸å—æ§â€ï¼ˆç”± state é©±åŠ¨ï¼‰
*/
```
### useRef å¼•ç”¨å€¼
1. å†™æ³•
```js
const myRef = useRef(null);
<div ref={myRef}>
```
2. ä¸ state çš„åŒºåˆ«
| ç‰¹æ€§             | useRef                           | useState                     |
|-----------------|----------------------------------|------------------------------|
| è¿”å›å€¼           | `{ current: initialValue }`       | `([å˜é‡çš„å½“å‰å€¼, è®¾ç½®å‡½æ•°])` |
| è§¦å‘é‡æ–°æ¸²æŸ“     | æ›´æ”¹æ—¶ä¸ä¼šè§¦å‘é‡æ–°æ¸²æŸ“          | æ›´æ”¹æ—¶è§¦å‘é‡æ–°æ¸²æŸ“           |
| å¯å˜æ€§           | å¯å˜ -- ä½ å¯ä»¥åœ¨æ¸²æŸ“è¿‡ç¨‹ä¹‹å¤–ä¿®æ”¹å’Œæ›´æ–° `current` çš„å€¼ | ä¸å¯å˜ -- å¿…é¡»ä½¿ç”¨ state è®¾ç½®å‡½æ•°æ¥ä¿®æ”¹ state å˜é‡ï¼Œä»è€Œæ’é˜Ÿé‡æ–°æ¸²æŸ“ |
| æ¸²æŸ“æœŸé—´ä½¿ç”¨     | ä½ ä¸åº”åœ¨æ¸²æŸ“æœŸé—´è¯»å–ï¼ˆæˆ–å†™å…¥ï¼‰`current` å€¼ | ä½ å¯ä»¥éšæ—¶è¯»å– stateã€‚ä½†æ˜¯ï¼Œæ¯æ¬¡æ¸²æŸ“éƒ½æœ‰è‡ªå·±ä¸å˜çš„ state å¿«ç…§ |
| ä½¿ç”¨åœºæ™¯         | 1. ç»„ä»¶éœ€è¦å­˜å‚¨ä¸€äº›å€¼ï¼Œä½†ä¸å½±å“æ¸²æŸ“é€»è¾‘ |å­˜å‚¨éœ€è¦è§¦å‘ç»„ä»¶æ›´æ–°å’Œé‡æ–°æ¸²æŸ“çš„æ•°æ®ï½œ
|                 | 2. å¸¸ç”¨äºè®¿é—® DOM å…ƒç´  |
|                 | a. å­˜å‚¨ timeout ID |
|                 | b. å­˜å‚¨å’Œæ“ä½œ DOM å…ƒç´ ï¼Œä¾‹å¦‚èšç„¦ã€æ»šåŠ¨æˆ–æµ‹é‡ DOM å…ƒç´  |
|                 | c. å­˜å‚¨ä¸éœ€è¦ç”¨æ¥è®¡ç®— JSX çš„å…¶ä»–å¯¹è±¡ |
```js
import { forwardRef, useRef } from 'react';
// é»˜è®¤æƒ…å†µä¸‹ï¼Œç»„ä»¶ä¸æš´éœ²å…¶ DOM èŠ‚ç‚¹ã€‚ æ‚¨å¯ä»¥é€šè¿‡ä½¿ç”¨ forwardRef å¹¶å°†ç¬¬äºŒä¸ª ref å‚æ•°ä¼ é€’ç»™ç‰¹å®šèŠ‚ç‚¹æ¥æš´éœ² DOM èŠ‚ç‚¹
const MyInput = forwardRef((props, ref) => {
  return <input {...props} ref={ref} />;
});
export default function Form() {
  const inputRef = useRef(null);

  function handleClick() {
    inputRef.current.focus();
  }
  return (
    <>
      <MyInput ref={inputRef} />
      <button onClick={handleClick}>
        èšç„¦è¾“å…¥æ¡†
      </button>
    </>
  );
}
```
### useEffect å‰¯ä½œç”¨
[å…¥é—¨]ğŸ‘‰(https://www.ruanyifeng.com/blog/2020/09/react-hooks-useeffect-tutorial.html)
[å¿…çœ‹æ–‡ç« ]ğŸ‘‰(https://overreacted.io/zh-hans/a-complete-guide-to-useeffect/)
useEffect å…è®¸ä½ å°†ç»„ä»¶ä¸å¤–éƒ¨ç³»ç»ŸåŒæ­¥ã€‚
Effect åœ¨ React ä¸­æ˜¯ä¸“æœ‰å®šä¹‰â€”â€”ç”±æ¸²æŸ“å¼•èµ·çš„å‰¯ä½œç”¨ã€‚ä¸ºäº†æŒ‡ä»£æ›´å¹¿æ³›çš„ç¼–ç¨‹æ¦‚å¿µï¼Œä¹Ÿå¯ä»¥å°†å…¶ç§°ä¸ºâ€œå‰¯ä½œç”¨ï¼ˆside effectï¼‰â€ã€‚
Effect é€šå¸¸ç”¨äºæš‚æ—¶â€œè·³å‡ºâ€ React ä»£ç å¹¶ä¸ä¸€äº› å¤–éƒ¨ ç³»ç»Ÿè¿›è¡ŒåŒæ­¥ã€‚è¿™åŒ…æ‹¬æµè§ˆå™¨ APIã€ç¬¬ä¸‰æ–¹å°éƒ¨ä»¶ï¼Œä»¥åŠç½‘ç»œç­‰ç­‰ã€‚å¦‚æœä½ æƒ³ç”¨ Effect ä»…æ ¹æ®å…¶ä»–çŠ¶æ€è°ƒæ•´æŸäº›çŠ¶æ€,[å¦‚]ğŸ‘‰(https://zh-hans.react.dev/reference/react/useEffect#examples-connecting)ã€‚
1. ç¼–å†™
```js
// 1. å£°æ˜Effect 
import { useEffect } from 'react';
function MyComponent() {
  useEffect(() => {
    // 2. æŒ‡å®šEffectä¾èµ–
    // useEffect(() => { // è¿™é‡Œçš„ä»£ç ä¼šåœ¨æ¯æ¬¡æ¸²æŸ“åæ‰§è¡Œ });
    // useEffect(() => { // è¿™é‡Œçš„ä»£ç åªä¼šåœ¨ç»„ä»¶æŒ‚è½½åæ‰§è¡Œ }, []);
    // useEffect(() => { //è¿™é‡Œçš„ä»£ç åªä¼šåœ¨æ¯æ¬¡æ¸²æŸ“åï¼Œå¹¶ä¸” a æˆ– b çš„å€¼ä¸ä¸Šæ¬¡æ¸²æŸ“ä¸ä¸€è‡´æ—¶æ‰§è¡Œ }, [a, b]);
    // 3. æŒ‰éœ€æ·»åŠ æ¸…ç†å‡½æ•°
    // ä¸‹æ¬¡ Effect è¿è¡Œä¹‹å‰ä»¥åŠå¸è½½æœŸé—´è¿™ä¸¤ä¸ªæ—¶å€™è°ƒç”¨æ¸…ç†å‡½æ•°
    // é‡æ–°æŒ‚è½½è€Œä¸­æ–­ï¼Œé‚£ä¹ˆéœ€è¦å®ç°ä¸€ä¸ªæ¸…ç†å‡½æ•°
  });
  return <div />;
}
```
2. Effect çš„ç”Ÿå‘½å‘¨æœŸ 
a. å½“ç»„ä»¶è¢«æ·»åŠ åˆ°å±å¹•ä¸Šæ—¶ï¼Œå®ƒä¼šè¿›è¡Œç»„ä»¶çš„ æŒ‚è½½ã€‚
b. å½“ç»„ä»¶æ¥æ”¶åˆ°æ–°çš„ props æˆ– state æ—¶ï¼Œé€šå¸¸æ˜¯ä½œä¸ºå¯¹äº¤äº’çš„å“åº”ï¼Œå®ƒä¼šè¿›è¡Œç»„ä»¶çš„ æ›´æ–°ã€‚
c. å½“ç»„ä»¶ä»å±å¹•ä¸Šç§»é™¤æ—¶ï¼Œå®ƒä¼šè¿›è¡Œç»„ä»¶çš„ å¸è½½ã€‚

3. å¤„ç†å¼€å‘ç¯å¢ƒä¸­Effectæ‰§è¡Œä¸¤æ¬¡çš„æ–¹æ³•
```js
// æ§åˆ¶éreactç»„ä»¶
useEffect(() => {
  const dialog = dialogRef.current;
  dialog.showModal();
  return () => dialog.close();
}, []);

// è®¢é˜…äº‹ä»¶
useEffect(() => {
  function handleScroll(e) {
    console.log(window.scrollX, window.scrollY);
  }
  window.addEventListener('scroll', handleScroll);
  return () => window.removeEventListener('scroll', handleScroll);
}, []);

// è§¦å‘åŠ¨ç”»
useEffect(() => {
  const node = ref.current;
  node.style.opacity = 1; // è§¦å‘åŠ¨ç”»
  return () => {
    node.style.opacity = 0; // é‡ç½®ä¸ºåˆå§‹å€¼
  };
}, []);

// è·å–æ•°æ® è€ƒè™‘ä½¿ç”¨æˆ–æ„å»ºå®¢æˆ·ç«¯ç¼“å­˜ã€‚ç›®å‰å—æ¬¢è¿çš„å¼€æºè§£å†³æ–¹æ¡ˆæ˜¯ React Queryã€useSWR å’Œ React Router v6.4+ã€‚
// æ¸…ç†å‡½æ•°åº”è¯¥è¦ä¹ˆ ä¸­æ­¢è¯¥æ•°æ®è·å–æ“ä½œï¼Œè¦ä¹ˆå¿½ç•¥å…¶ç»“æœï¼š
useEffect(() => {
  let ignore = false;
  async function startFetching() {
    const json = await fetchTodos(userId);
    if (!ignore) {
      setTodos(json);
    }
  }
  startFetching();
  return () => {
    ignore = true;
  };
}, [userId]);
// æœ€å¥½çš„æ–¹æ³•æ˜¯ä½¿ç”¨ä¸€ç§å¯ä»¥åˆ é™¤é‡å¤è¯·æ±‚ã€å¹¶ç¼“å­˜è¯·æ±‚å“åº”çš„è§£å†³æ–¹æ¡ˆï¼š
function TodoList() {
  const todos = useSomeDataLibrary(`/api/user/${userId}/todos`);
  // ...
}

// å‘é€åˆ†ææŠ¥å‘Š
function Page({ url, shoppingCart }) {
  const onVisit = useEffectEvent(visitedUrl => {
    logVisit(visitedUrl, shoppingCart.length)
  });

  useEffect(() => {
    onVisit(url);// å‘é€ POST è¯·æ±‚
  }, [url]); // âœ… æ‰€æœ‰å£°æ˜çš„ä¾èµ–é¡¹
  // ...
}
// åˆå§‹åŒ–åº”ç”¨æ—¶ä¸éœ€è¦ä½¿ç”¨Effectçš„æƒ…å½¢
// ä¸è¦å†Effectä¸­æ‰§è¡Œè´­ä¹°å•†å“ä¸€ç±»çš„æ“ä½œ
// å¦‚æœ Effect ä¸€å®šè¦é˜»æ­¢æµè§ˆå™¨ç»˜åˆ¶å±å¹•ï¼Œä½¿ç”¨ useLayoutEffect æ›¿æ¢ useEffectã€‚è¯·æ³¨æ„ï¼Œç»å¤§å¤šæ•°çš„ Effect éƒ½ä¸éœ€è¦è¿™æ ·ã€‚åªæœ‰å½“åœ¨æµè§ˆå™¨ç»˜åˆ¶ä¹‹å‰è¿è¡Œ Effect éå¸¸é‡è¦çš„æ—¶å€™æ‰éœ€è¦å¦‚æ­¤ï¼šä¾‹å¦‚ï¼Œåœ¨ç”¨æˆ·çœ‹åˆ° tooltip ä¹‹å‰æµ‹é‡å¹¶å®šä½å®ƒã€‚
```
### useCallback
å…è®¸å¤šæ¬¡æ¸²æŸ“ä¸­ç¼“å­˜å‡½æ•°,å¸¸ç”¨äºæ€§èƒ½ä¼˜åŒ–
1. è·³è¿‡ç»„ä»¶çš„é‡æ–°æ¸²æŸ“
2. ä»è®°å¿†åŒ–å›è°ƒä¸­æ›´æ–°state
3. é˜²æ­¢é¢‘ç¹è§¦å‘Effect
4. ä¼˜åŒ–è‡ªå®šä¹‰Hook
```js
const cachedFn = useCallback(fn, dependencies)//(ä»»ä½•å‚æ•°å¹¶ä¸”è¿”å›ä»»ä½•å€¼è¦ç¼“å­˜çš„å‡½æ•°,æœ‰å…³æ˜¯å¦æ›´æ–° fn çš„æ‰€æœ‰å“åº”å¼å€¼çš„ä¸€ä¸ªåˆ—è¡¨)
```
### useMemo è®°å¿†åŒ–
å®ƒåœ¨æ¯æ¬¡é‡æ–°æ¸²æŸ“çš„æ—¶å€™èƒ½å¤Ÿç¼“å­˜è®¡ç®—çš„ç»“æœ
1. è·³è¿‡ä»£ä»·æ˜‚è´µçš„é‡æ–°è®¡ç®—
2. è·³è¿‡ç»„ä»¶çš„é‡æ–°æ¸²æŸ“
3. è®°å¿†å¦ä¸€ä¸ªHookçš„ä¾èµ–
4. è®°å¿†ä¸€ä¸ªå‡½æ•°
```js
const cachedValue = useMemo(calculateValue, dependencies)//(è¿”å›ä»»æ„ç±»å‹è¦ç¼“å­˜è®¡ç®—å€¼çš„å‡½æ•°,ä½¿ç”¨çš„å“åº”å¼å˜é‡ç»„æˆçš„æ•°ç»„)
```

## é…ç½®
### [tailwindcss]
(https://tailwindcss.com/docs/guides/vite)

### valtio
